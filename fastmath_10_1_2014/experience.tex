\frame{\frametitle{BGQ Experience}
5D torus, 16 cores/node, 4 HW threads/core, 16GB/node
\bigskip \\
48 rack Mira runs - 92B mesh elements
\begin{itemize}
\item Fairly easy migration from BGP
\item Pipeline stalls on data dependencies - use more threads
\item 6 cycle branch instructions
\item System comm threads can compete with user threads
\item Very few commercial codes ported - can't buy a baby BG
\end{itemize}
}

\frame{\frametitle{Stampede Experience}
2-level fat-tree, 6,400 nodes \\
node: 2x E5 8 core sockets (32GB) + 60 core Phi (8GB)
\bigskip \\
Growing pains - running natively on Phi
\begin{itemize}
  \item TACC support has been very helpful
  \item Kicked off the system twice 
  \begin{itemize}
    \item Crashed fens after posix file i/o from Phi (NFS + Lustre)
    \item Crashed 30+ compute nodes - Intel network stack bug 
  \end{itemize}
  \item Complex infrastructure and environment requirements
\end{itemize}
Partitioning 25M element mesh on an equal number of Phi and BG/Q nodes
\begin{itemize}
  \item 1024 $\rightarrow$ 2048 partitioning is 40\% faster on Stampede
  \item 2048 $\rightarrow$ 4096 partitioning is 8\% slower on Stampede
\end{itemize}
Vertex balancing of 3M element mesh on 128 parts
{\tiny
\begin{table}
  \begin{tabular} { c | c | c | c }
    system & nodes & time (s) & env \\
    \hline 
    Stampede & 2   & 2.48       & mvapich2-mic \\
             & 3   & {\bf 1.88} &  \\
    \hline
    BGQ      & 2   & 3.74 & gnu 4.7 \\
             & 4   & 2.49 & \\
             & 8   & 2.16 & \\
  \end{tabular}
\end{table}
}
}
